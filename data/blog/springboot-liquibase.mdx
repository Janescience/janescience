---
title: ‡πÉ‡∏ä‡πâ Liquibase ‡∏Å‡∏±‡∏ö Spring Boot
date: "2022-03-09"
tags: ["java",'liquibase','spring boot']
draft: false
summary: "‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Database ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Insert , Update , Delete ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏£‡∏∑‡∏≠ Create , Drop , Alter ‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠ Add , Drop , Alter ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ "
layout: PostSimple
featureImage: "/static/images/blog/liquibase-springboot/spring-liquibase.jpeg"
---

<center>![Liquibase Spring Boot](/static/images/blog/liquibase-springboot/spring-liquibase.jpeg)</center>

_<center className="text-xs">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å [javadeveloperzone.com](https://javadeveloperzone.com/wp-content/uploads/2018/09/Spring-Boot-Liquibase-Example.jpg) </center>_

> ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏°‡∏µ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ Sprig Boot , SQL ‡∏°‡∏≤‡∏ö‡πâ‡∏≤‡∏á‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏Å‡∏Å‡πá‡∏ô‡πâ‡∏≠‡∏¢

### ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏Ç‡∏µ‡πâ‡πÄ‡∏Å‡∏µ‡∏¢‡∏à‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î üòÇ

- [Liquibase ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ ?](#liquibase-‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£-)
- [‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Liquibase ?](#‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ-liquibase-)
- [‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Liquibase ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ?](#‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ-liquibase-‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á-)
- [‡πÄ‡∏û‡∏¥‡πà‡∏° Maven Dependency](#‡πÄ‡∏û‡∏¥‡πà‡∏°-maven-dependency)
- [‡πÄ‡∏û‡∏¥‡πà‡∏° config ‡πÉ‡∏ô application.properties](#‡πÄ‡∏û‡∏¥‡πà‡∏°-config-‡πÉ‡∏ô-applicationproperties)
- [Structure](#structure)
- [db-changelog-master.xml](#db-changelog-masterxml)
- [‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Liquibase](#‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á-liquibase)
- [Syntax](#syntax)
- [changeSet](#changeset)
- [Sub tags](#sub-tags)
  - [comment](#comment)
  - [preConditions](#preconditions)
    - [preConditions ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ö‡πâ‡∏≤‡∏á ?](#preconditions-‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ö‡πâ‡∏≤‡∏á-)
  - [validCheckSum](#validchecksum)
  - [rollback](#rollback)
- [Entities](#entities)
  - [Table](#table)
  - [Column](#column) 
  - [View](#view) 
  - [Sequence](#sequence)
  - [Data](#data)  
---

### Liquibase ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ ?

‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á Database ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Insert , Update , Delete ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏£‡∏∑‡∏≠ Create , Drop , Alter ¬†‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏´‡∏£‡∏∑‡∏≠ Add , Drop , Alter ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå ‡πÅ‡∏•‡∏∞‡∏≠‡∏∑‡πà‡∏ô‡πÜ
‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Ç‡∏≠‡∏á XML, SQL, YAML, JSON ‡πÇ‡∏î‡∏¢ Syntax ‡∏Ç‡∏≠‡∏á Script ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏∂‡∏î‡∏ï‡∏≤‡∏° Database ‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô SQL

<center>. . .</center>

### ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Liquibase ?

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏•‡∏∞‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å Environment ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞ Run Project ‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏Ñ‡∏≠‡∏¢‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ Script Database ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Deploy SIT , UAT ‡∏´‡∏£‡∏∑‡∏≠ Production
‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡πâ‡∏≤‡∏¢ Server , Environment ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Database

<center>. . .</center>

### ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Liquibase ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ?

1. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å Run script SQL ‡∏ö‡∏ô Dev ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö Script ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏ß‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏µ‡πà‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ó‡∏µ‡πà Developer ‡∏à‡∏∞‡∏•‡∏∑‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏Å‡∏´‡∏•‡πà‡∏ô‡πÑ‡∏õ‡∏ö‡∏≤‡∏á Script ‡∏î‡πâ‡∏ß‡∏¢
2. ‡∏à‡∏≤‡∏Å‡∏Ç‡πâ‡∏≠ 1. ‡∏ó‡∏µ‡πà‡∏û‡∏π‡∏î‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö Script ‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏ñ‡πâ‡∏≤ Script ‡∏ô‡∏±‡πâ‡∏ô Developer ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏õ‡πá‡∏ô BA , SA ‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏≠‡∏∑‡πà‡∏ô‡πÜ Script ‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Project ‡∏ã‡∏∂‡πà‡∏á‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ñ‡∏ß‡∏£‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô Project ‡∏ô‡∏±‡πâ‡∏ô‡πÜ
3. ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å ‚ÄãDeploy ‡πÅ‡∏•‡πâ‡∏ß‡∏ï‡πâ‡∏≠‡∏á‡∏ô‡∏≥ Script ‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡∏°‡∏≤ Run ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö‡∏ö‡∏ô Environment ‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ô‡∏≥ Script ‡∏°‡∏≤ Run ‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö ‡∏´‡∏£‡∏∑‡∏≠ Run ‡∏ú‡∏¥‡∏î Sequence ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Deploy ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô

‡∏•‡∏≠‡∏á‡∏Ñ‡∏¥‡∏î‡πÄ‡∏•‡πà‡∏ô‡πÜ‡∏î‡∏π‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≤‡∏£ Deploy ‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏±‡πâ‡∏ô ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 10 Script ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà Deploy ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà Developer ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á Script ‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏Ñ‡πà‡πÄ‡∏≠‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÑ‡∏ß‡πâ‡πÑ‡∏õ Deploy ‡∏ï‡∏≤‡∏° Check list ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡∏Ñ‡∏á‡∏à‡∏∞‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡∏∞‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢‡∏ô‡πà‡∏≤‡∏î‡∏π ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Å‡∏≤‡∏£ Deploy ‡∏ó‡∏µ‡πà Production ‡∏ö‡∏≤‡∏á‡∏ó‡∏µ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î

> ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ Liquibase ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πà‡∏≤‡∏ß‡∏°‡∏≤‡∏ô‡∏µ‡πâ ‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤ ‡∏à‡∏∞‡∏£‡∏π‡πâ‡πÅ‡∏•‡∏∞‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ï‡∏≠‡∏ô Dev ‡πÅ‡∏•‡πâ‡∏ß ‡∏•‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏≠‡∏≤‡∏à‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å Human error ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á

<center>. . .</center>

### ‡πÄ‡∏û‡∏¥‡πà‡∏° Maven Dependency

‡πÄ‡∏û‡∏¥‡πà‡∏° `spring-boot-starter-jdbc` , `liquibase-core` ‡∏ó‡∏µ‡πà‡πÑ‡∏ü‡∏•‡πå pom.xml ‡πÅ‡∏•‡∏∞ Reimport maven

```xml
<dependencies>
    ...
    <dependency>
		<groupId>org.springframework.boot</groupId>
		<artifactId>spring-boot-starter-jdbc</artifactId>
	</dependency>
    <dependency>
        <groupId>org.liquibase</groupId>
        <artifactId>liquibase-core</artifactId>
    </dependency>
    ...
</dependencies>
```

<center>. . .</center>

### ‡πÄ‡∏û‡∏¥‡πà‡∏° config ‡πÉ‡∏ô application.properties

```properties
#‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î Path file ‡∏Ç‡∏≠‡∏á Db changelog ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô 
#‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î Spring boot ‡∏à‡∏∞‡∏°‡∏≠‡∏á‡∏´‡∏≤ Path file 'db/changelog/db.changelog-master.yaml' ‡πÄ‡∏õ‡πá‡∏ô Path ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô
spring.liquibase.change-log = classpath:/db/db-changelog-master.xml

#‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Level logs ‡πÑ‡∏î‡πâ ‡∏ú‡∏°‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô INFO
logging.level.liquibase = INFO
```

<center>. . .</center>

### Structure

```
‚îî‚îÄ‚îÄ src
    ‚îî‚îÄ‚îÄ main
        ‚îî‚îÄ‚îÄ resources
            ‚îî‚îÄ‚îÄ db
                ‚îî‚îÄ‚îÄ changelogs
                ‚îÇ   ‚îú‚îÄ‚îÄ table
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ xxx01.xml
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ xxx02.xml
                ‚îÇ   ‚îî‚îÄ‚îÄ view
                ‚îÇ       ‚îî‚îÄ‚îÄ v_xxx01.xml
                ‚îÇ       ‚îî‚îÄ‚îÄ v_xxx02.xml
                ‚îî‚îÄ‚îÄ sql
                ‚îÇ   ‚îî‚îÄ‚îÄ init_master_xxx01.sql
                ‚îÇ   ‚îî‚îÄ‚îÄ init_master_xxx02.sql
                ‚îî‚îÄ‚îÄ db-changelog-master.xml

```

‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏Ç‡∏≠‡∏á Liquibase ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ ‡πÇ‡∏î‡∏¢‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏´‡∏•‡∏±‡∏Å‡πÜ ‡∏Ñ‡∏∑‡∏≠

- changelogs/table - ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Script ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÇ‡∏î‡∏¢‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏ï‡∏≤‡∏°‡∏ï‡∏≤‡∏£‡∏≤‡∏á
- changelogs/view - ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Script ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö View ‡πÇ‡∏î‡∏¢‡∏à‡∏∞‡πÅ‡∏¢‡∏Å‡∏≠‡∏≠‡∏Å‡∏ï‡∏≤‡∏° View
- sql - ‡∏à‡∏±‡∏î‡πÄ‡∏Å‡πá‡∏ö Script ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô‡∏™‡∏π‡∏á ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô Syntax ‡∏Ç‡∏≠‡∏á Liquibase ‡πÑ‡∏î‡πâ ‡∏´‡∏£‡∏∑‡∏≠ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Master data ‡∏ï‡πà‡∏≤‡∏á‡πÜ

> ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏≠‡∏∑‡πà‡∏ô‡∏ô‡∏≠‡∏Å‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏à‡∏≤‡∏Å table , view ‡∏Å‡πá‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô changelogs

<center>. . .</center>

### db-changelog-master.xml

‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÉ‡∏ô Path `src/main/resources/db/` ‡πÅ‡∏•‡∏∞‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà Run project ‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡∏°‡∏≤‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£ Change ‡∏ö‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `.xml` ‡πÉ‡∏´‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ô‡∏µ‡πâ‡∏î‡πâ‡∏ß‡∏¢

```xml
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">

    <!-- Table -->
    <include file="/db/changelogs/table/xxx01.xml"/>
    <include file="/db/changelogs/table/xxx02.xml"/>

    <!-- View -->
    <include file="/db/changelogs/view/v_xxx01.xml"/>
    <include file="/db/changelogs/view/v_xxx02.xml"/>

</databaseChangeLog>
```

<center>. . .</center>

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Liquibase

‡∏ñ‡πâ‡∏≤ Run project ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏û‡∏¥‡πà‡∏° Maven dependency ‡πÅ‡∏•‡∏∞ Config ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß Spring boot ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤

- **databasechangelog** - ‡πÄ‡∏Å‡πá‡∏ö Logs ‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Run script ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ id ‡πÄ‡∏õ‡πá‡∏ô Primary key

| Column        | Data type    | Description                                   |
| ------------- | ------------ | --------------------------------------------- |
| ID            | VARCHAR(255) | id ‡∏Ç‡∏≠‡∏á changeSet                              |
| AUTHOR        | VARCHAR(255) | author ‡∏Ç‡∏≠‡∏á changeSet                          |
| FILENAME      | VARCHAR(255) | Path file ‡∏Ç‡∏≠‡∏á changelog                       |
| DATEEXECUTED  | DATETIME     | Date/time ‡∏ó‡∏µ‡πà changeSet ‡∏ô‡∏±‡πâ‡∏ô‡πÜ Execute         |
| ORDEREXECUTED | INT          | ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£ Executed                          |
| EXECTYPE      | VARCHAR(10)  | EXECUTED, FAILED, SKIPPED, RERAN ‡πÅ‡∏•‡∏∞ MARK_RAN |
| DESCRIPTION   | VARCHAR(255) | ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡∏ß‡πà‡∏≤ changeSet ‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£         |

#### ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á

![Database Changelog](/static/images/blog/liquibase-springboot/databasechangelog.png)

> ‡∏´‡∏•‡∏±‡∏Å‡πÜ‡πÅ‡∏•‡πâ‡∏ß Column ‡∏ó‡∏µ‡πÄ‡∏£‡∏≤‡∏™‡∏ô‡πÉ‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ ‡πÅ‡∏ï‡πà Column ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏°‡∏µ‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤‡∏ô‡∏µ‡πâ

- **databasechangeloglock** - ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏µ Developer 2 ‡∏Ñ‡∏ô Run script ‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡πÑ‡∏õ‡∏ó‡∏µ‡πà Database ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô Liquibase ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å Lock ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Transaction conflict ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Unlock ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£ Run script `UPDATE DATABASECHANGELOGLOCK SET LOCKED=false`

| Column      | Data type    | Description                      |
| ----------- | ------------ | -------------------------------- |
| ID          | INT          | ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏°‡∏µ‡πÅ‡∏Ñ‡πà id = 1             |
| LOCKED      | BOOLEAN      | true = Locked , false = Unlocked |
| LOCKGRANTED | DATETIME     | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà Unlocked        |
| LOCKEDBY    | VARCHAR(255) | ‡πÉ‡∏Ñ‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ Locked            |

#### Spring boot ‡∏à‡∏∞‡∏£‡∏π‡πâ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£ ?

Spring boot ‡∏à‡∏∞‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏°‡∏µ Script ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏Å‡πá‡∏ï‡πà‡∏≠‡πÄ‡∏°‡∏∑‡πà‡∏≠ id ‡∏ô‡∏±‡πâ‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÉ‡∏ô Database ‡πÇ‡∏î‡∏¢‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡πÑ‡∏ü‡∏•‡πå `.xml` ‡πÅ‡∏•‡∏∞ Compare ‡∏Å‡∏±‡∏ö Database ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

<center>. . .</center>

### Syntax

Tags ‡πÅ‡∏•‡∏∞ Attibutes ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ ‡πÇ‡∏î‡∏¢‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤ Tag ‡πÑ‡∏´‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô ‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞ Tag ‡∏°‡∏µ Attibute ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á

> ‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏°‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡∏à‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÄ‡∏Ñ‡∏¢‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô
> ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà [Liquibase Documents](https://docs.liquibase.com/concepts/home.html)

```xml
    <changeSet id="action-entitie-datetime" author="author_name" >

        <!-- Sub Tags -->
        <comment>
            <!-- Description of this changeSet  -->
        </comment>

        <preConditions >
                <changeSetExecuted id="action-entitie-datetime" author="author_name" changeLogFile="changelog.xml"/>
                <columnExists tableName="my_table" columnName="my_column"/>
                <tableExists tableName="my_table"/>
                <viewExists viewName="my_view"/>
                <foreignKeyConstraintExists foreignKeyName="my_foreignKey"/>
                <indexExists indexName="my_index" tableName="my_table" columnNames="my_table"/>
                <sequenceExists sequenceName="my_sequence" />
                <primaryKeyExists primaryKeyName="my_primaryKey" tableName="my_table"/>
                <sqlCheck expectedResult="my_expectedResult">
                    SELECT COUNT(1) FROM my_table WHERE user = 'liquibase'
                </sqlCheck>
        </preConditions>

        <validCheckSum>
            <!-- Get data from column 'md5sum'  -->
        </validCheckSum>

        <rollback>
            <!-- Sql Script or Change Type -->
        </rollback>

        <!-- Any Refactoring Tags -->
        <!-- Entities -->
            <!-- Table -->
                <createTable></createTable>
                <dropTable></dropTable>
                <renameTable></renameTable>
            <!-- Column -->
                <addColumn></addColumn>
                <dropColumn></dropColumn>
                <renameColumn></renameColumn>
                <modifyDataType></modifyDataType>
                <setColumnRemarks></setColumnRemarks>
                <addAutoIncrement></addAutoIncrement>
            <!-- Index -->
                <createIndex></createIndex>
                <dropIndex></dropIndex>
            <!-- View -->
                <createView></createView>
                <dropView></dropView>
                <renameView></renameView>
            <!-- Procedure -->
                <createProcedure></createProcedure>
                <dropProcedure></dropProcedure>
            <!-- Sequence -->
                <createSequence></createSequence>
                <dropSequence></dropSequence>
                <renameSequence></renameSequence>
                <alterSequence ></alterSequence>

        <!-- Constraints -->
            <!-- Default value -->
                <addDefaultValue></addDefaultValue>
                <dropDefaultValue></dropDefaultValue>
            <!-- Foreign key -->
                <addForeignKeyConstraint></addForeignKeyConstraint>
                <dropForeignKeyConstraint></dropForeignKeyConstraint>
                <dropAllForeignKeyConstraints></dropAllForeignKeyConstraints>
            <!-- Not null -->
                <addNotNullConstraint></addNotNullConstraint>
                <dropNotNullConstraint></dropNotNullConstraint>
    </changeSet>
```

<center>. . .</center>

### changeSet

‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ö‡πà‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Script

- **id** - ‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞ changeSet ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ id ‡∏ó‡∏µ‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Primary key ‡πÉ‡∏ô Database ‡∏ñ‡πâ‡∏≤‡∏ã‡πâ‡∏≥‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î Error ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ id ‡πÉ‡∏´‡πâ‡∏™‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏°‡∏≤‡∏¢‡∏î‡πâ‡∏ß‡∏¢ ‡πÄ‡∏ä‡πà‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á ‡∏à‡∏∞‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô `create-table-my_table-MMDDYYYhhmm` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏∞‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô
- **author** - ‡∏ä‡∏∑‡πà‡∏≠‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Script ‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Track ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏°‡∏µ‡∏õ‡∏±‡∏ç‡∏´‡∏≤

---

### Sub tags

#### comment

‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á `changeSet` ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÑ‡∏õ‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡πÑ‡∏î‡πâ‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£

<center>. . .</center>

#### preConditions

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠ ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÉ‡∏ä‡πâ‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏ö‡∏ö [‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°](https://docs.liquibase.com/concepts/changelogs/preconditions.html)

- **onFail** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡πà‡∏≠ ‡∏ñ‡πâ‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÄ‡∏Å‡∏¥‡∏î Fail ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ ‡∏ã‡∏∂‡πà‡∏á‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 4 ‡∏ó‡∏≤‡∏á‡πÄ‡∏•‡∏∑‡∏≠‡∏Å <br/>

  - **HALT** - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏ô‡∏≠‡∏Å `changeSet` ‡πÑ‡∏î‡πâ ‡πÇ‡∏î‡∏¢‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÅ‡∏£‡∏Å‡∏™‡∏∏‡∏î‡∏Ç‡∏≠‡∏á changelog ‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥ `changeSet` ‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô changelog ‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô <br/>

  ```xml
  <preConditions onFail="HALT">
      ...
  </preConditions>

  <changeSet id="1" author="liquibase">
      ...
  </changeSet>

  <changeSet id="2" author="liquibase">
      ...
  </changeSet>
  ```

  ‡∏ñ‡πâ‡∏≤‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡πÉ‡∏ô `preConditions` ‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥ `changeSet` ‡∏ó‡∏µ‡πà id = 1 ‡πÅ‡∏•‡∏∞ 2 ‡∏ï‡πà‡∏≠

  - **CONTINUE** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏° `changeSet` ‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡πÅ‡∏•‡∏∞‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ execute ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡∏°‡∏∑‡πà‡∏≠ changeSet ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
  - **MARK_RAN** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏° `changeSet` ‡∏ô‡∏±‡πâ‡∏ô‡πÜ ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á databasechangelog ‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ execute ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß
  - **WARN** - ‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£ `changeSet` ‡∏ï‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å changelog ‡∏ï‡∏≤‡∏°‡∏õ‡∏Å‡∏ï‡∏¥ ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏ô‡∏≠‡∏Å `changeSet` ‡πÑ‡∏î‡πâ ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö `HALT` ‡πÅ‡∏ï‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏´‡∏¢‡∏∏‡∏î‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô

> ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡∏ú‡∏°‡πÉ‡∏ä‡πâ‡πÅ‡∏Ñ‡πà MARK_RAN

#### preConditions ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ‡∏ö‡πâ‡∏≤‡∏á ?

- **changeSetExecuted**

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ `changeSet` ‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£ execute ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á

```xml
<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà execute ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤ execute ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏à‡∏∞ Fail -->
<preConditions onFail...>
    <changeSetExecuted id="action-entitie-datetime" author="author_name" changeLogFile="changelog.xml" />
</preConditions>
```

- **columnExists**

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Column ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‡πÇ‡∏î‡∏¢‡∏ï‡πâ‡∏≠‡∏á‡∏ö‡∏≠‡∏Å‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡∏ó‡∏µ‡πà Table ‡πÑ‡∏´‡∏ô ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ ‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö `<dropColumn/>` ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ Change ‡∏ï‡πà‡∏≤‡∏á‡πÜ
‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö `<addColumn/>` ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏à‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° Column ‡πÑ‡∏î‡πâ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ Column ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏

```xml
<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏à‡∏∞ Fail -->
<preConditions onFail...>
    <not>
        <columnExists tableName="my_table" columnName="my_column" />
    </not>
</preConditions>

<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ ‡∏à‡∏∞ Fail-->
<preConditions onFail...>
    <columnExists tableName="my_table" columnName="my_column" />
</preConditions>
```

- **tableExists**

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Table ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏∏ ‡∏ñ‡πâ‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏°‡∏µ ‡∏™‡πà‡∏ß‡∏ô‡∏°‡∏≤‡∏Å‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö `<dropTable/>` ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£ Change ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏Å‡∏±‡∏ö `<createTable/>`

```xml
<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏à‡∏∞ Fail -->
<preConditions onFail...>
    <not>
        <tableExists tableName="my_new_table"/>
    </not>
</preConditions>

<!-- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‡∏ñ‡πâ‡∏≤‡∏û‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ ‡∏à‡∏∞ Fail-->
<preConditions onFail...>
    <tableExists tableName="my_new_table"/>
</preConditions>
```

> ‡∏ú‡∏°‡∏Ç‡∏≠‡∏Ç‡πâ‡∏≤‡∏° Change type ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏Ç‡∏≠‡∏á Exists ‡πÑ‡∏õ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å Concept ‡∏à‡∏∞‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏´‡∏°‡∏î ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏¢‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Ç‡∏≠‡∏á Column ‡πÅ‡∏•‡∏∞ Table

- **sqlCheck**

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Return value ‡∏ó‡∏µ‡πà‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Sql script ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ Return ‡πÄ‡∏û‡∏µ‡∏¢‡∏á 1 row ‡∏´‡∏£‡∏∑‡∏≠ 1 value ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

```xml
<preConditions onFail...>
    <sqlCheck expectedResult="1">
        SELECT COUNT(1) FROM my_table WHERE user = 'liquibase'
    </sqlCheck>
</preConditions>

```

<center>. . .</center>

#### validCheckSum

Tag ‡∏ô‡∏µ‡πâ ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Execute ‡∏ã‡πâ‡∏≥‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÇ‡∏î‡∏¢‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà Error ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç `changeSet` ‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢ Execute ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ ‡∏à‡∏∞‡∏°‡∏µ Error ‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á `changeSet` ‡πÄ‡∏õ‡πá‡∏ô id ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á `changeSet` ‡πÉ‡∏´‡∏°‡πà ‡∏à‡∏∞‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ó‡∏µ‡πà `changeSet` ‡πÄ‡∏î‡∏¥‡∏° ‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏° `<validCheckSum/>` ‡πÇ‡∏î‡∏¢‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤ Sum ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å Error

```bash
Validation Failed:
     1 change sets check sum
          com/example/changelog.xml::1::author_name was:
    8:1b99d310bf88ee47d9d7daf1f33f2275 but is now: 8:af6710859b7acfa6538fed7079fe9525
```

```xml
<changeSet id="action-entitie-datetime" author="author_name">
      <validCheckSum>8:af6710859b7acfa6538fed7079fe9525</validCheckSum>
      (new logic here)
</changeSet>
```

<center>. . .</center>

#### rollback

‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏£‡∏∞‡∏ö‡∏∏‡πÑ‡∏î‡πâ‡∏ó‡∏±‡πâ‡∏á SQL ‡πÅ‡∏•‡∏∞ Change Type ‡∏´‡∏£‡∏∑‡∏≠ ‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á `changeSet` ‡∏≠‡∏∑‡πà‡∏ô‡πÜ‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ô `changeSet` ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ `rollback` ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡∏¥‡∏î Error ‡∏à‡∏∞‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏¢‡πÉ‡∏ô `changeSet` ‡∏ô‡∏±‡πâ‡∏ô‡πÜ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏° ‡∏°‡∏µ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î 4 ‡πÅ‡∏ö‡∏ö

- **Change Type**

```xml
<changeSet id="action-entitie-datetime" author="author_name">
	<createTable tableName="my_table">
	<rollback>
		<dropTable tableName="my_table"/>
	</rollback>
</changeSet>
```

‡∏ñ‡πâ‡∏≤ `createTable` ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà `dropTable` ‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ñ‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ß‡πà‡∏≤ ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `createTable` ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏• ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á
‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ `rollback` ‡∏Ñ‡∏£‡∏≠‡∏ö‡πÑ‡∏ß‡πâ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á ‡πÅ‡∏•‡∏∞‡∏≠‡∏µ‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å drop

- **‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á `changeSet` ‡∏≠‡∏∑‡πà‡∏ô**

```xml
<changeSet id="action-entitie-datetime-1" author="author_name-1">
	<dropTable tableName="my_table"/>
	<rollback changeSetId="action-entitie-datetime-2" changeSetAuthor="author_name-2"/>
</changeSet>
```

‡∏ñ‡πâ‡∏≤ `changeSet` ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤ `rollback` ‡∏ó‡∏µ‡πà `changeSet` ‡∏ô‡∏µ‡πâ

- **SQL**

```xml
<changeSet id="action-entitie-datetime" author="author_name">
	<createTable tableName="my_table"/>
	<rollback >
        <sql>
            drop table my_table;
        </sql>
    </rollback>
</changeSet>
```

‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô SQL ‡πÑ‡∏î‡πâ ‡∏ñ‡πâ‡∏≤‡πÅ‡∏ö‡∏ö Change Type ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ

> ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÅ‡∏ö‡∏ö SQL ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¥‡∏á‡∏ï‡∏≤‡∏° Syntax ‡∏Ç‡∏≠‡∏á Database ‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó

---

## Entities

‡∏´‡∏•‡∏±‡∏Å‡πÜ‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÉ‡∏ä‡πâ‡∏°‡∏µ ‡πÅ‡∏ö‡πà‡∏á‡πÑ‡∏î‡πâ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ‡∏Ñ‡∏£‡∏±‡∏ö

### Table

- **createTable**

‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `preConditions` ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á employee

```xml
<changeSet id="create_table_employee_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <not>
            <tableExists tableName="employee"/>
        </not>
    </preConditions>
	<createTable tableName="employee">
        <column name="id" type="int">
           <constraints primaryKey="true"/>
        </column>
        <column name="employee_no" type="varchar(10)" remarks="‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô">
           <constraints nullable="false"/>
        </column>
    </createTable>
</changeSet>
```

- **createTable (SQL)**

```xml
<changeSet id="action-entitie-datetime" author="author_name">
	<preConditions onFail="MARK_RAN">
        <not>
            <tableExists tableName="member"/>
        </not>
    </preConditions>
    <sql>
        CREATE TABLE public."member" (
                id int8 NOT NULL GENERATED BY DEFAULT AS IDENTITY,
                created_by varchar(255) NULL,
                created_date timestamp NULL,
                updated_by varchar(255) NULL,
                updated_date timestamp NULL,
                "name" varchar(255) NULL,
                status varchar(255) NULL,
                CONSTRAINT member_pkey PRIMARY KEY (id)
        );
        comment on column public."member".name is '‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å';
    </sql>
</changeSet>
```

- **dropTable** 

‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `preConditions` ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á users 

```xml
<changeSet id="drop_table_users_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="users" />
    </preConditions>

    <dropTable tableName="users"/>
</changeSet>
```

<center>. . .</center>

### Column


- **addColumn** 

‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `preConditions` ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á member ‡πÅ‡∏•‡∏∞ ‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ column active

```xml
<changeSet id="add_column_active_table_member_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="member" />
        <not>
            <columnExists tableName="member" columnName="active"/>
        </not>
    </preConditions>
    <addColumn tableName="member">
        <column name="active" type="varchar(1)" remarks="Flag Y : ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô , N : ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô" defaultValue="Y"/>
    </addColumn>
</changeSet>
```


- **dropColumn** 

‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç `preConditions` ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á users ‡πÅ‡∏•‡∏∞ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ column version

```xml
<changeSet id="drop_column_version_table_users_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="users" />
        <columnExists tableName="users" columnName="version"/>
    </preConditions>
    <dropColumn tableName="users" columnName="version"/>
</changeSet>
```

- **SQL**

```xml
<changeSet id="alter_column_phone_number_table_users_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="users" />
        <columnExists tableName="users" columnName="phone_number"/>
    </preConditions>
    <sql>
        ALTER TABLE users ALTER COLUMN phone_number DROP NOT NULL;
    </sql>
</changeSet>

<changeSet id="alter_column_fine_time_table_groups_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="groups" />
        <columnExists tableName="groups" columnName="fine_time"/>
    </preConditions>
    <sql>
        ALTER TABLE public."groups" DROP COLUMN fine_time;
        ALTER TABLE public."groups" ADD fine_time int4 NULL;
    </sql>
</changeSet>
```

<center>. . .</center>

### View

‡∏ñ‡πâ‡∏≤ view ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏° ‡∏ú‡∏°‡πÉ‡∏ä‡πâ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô id `changeSet` ‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ v1 , v2 , v3 ... ‡πÅ‡∏•‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô DDMMYYYY 
‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á `changeSet` ‡πÉ‡∏´‡∏°‡πà ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏Ñ‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£ drop view 

- **createView**

`preConditions` ‡∏Ñ‡∏∑‡∏≠ ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô view v_name_02

```xml
<changeSet id="create_view_v_name_02_v1_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <tableExists tableName="groups" />
        <tableExists tableName="member" />
        <viewExists viewName="v_name_01" />
    </preConditions>
    <sqlFile path="/db/sql/v_name_02.sql" encoding="UTF-8" />
</changeSet>
```

**/db/sql/v_name_02.sql**

```sql
create view v_name_02
as select
   ...
from
    v_name_01 v01
    left join "groups" g on ...
    left join "member" m on ...
```

- **dropView**

‡∏ó‡∏Å‡∏∏ `changeSet` ‡∏Å‡∏≤‡∏£ drop view ‡∏ú‡∏°‡∏à‡∏∞‡∏£‡∏ß‡∏°‡πÑ‡∏ß‡πâ‡πÉ‡∏ô `/db/changelogs/view/drop.xml`

```xml
<changeSet id="drop_view_v_name_02_v1_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <viewExists viewName="v_name_02"/>
    </preConditions>
    <sql>
        DROP VIEW v_name_02;
    </sql>
</changeSet>
```

‡πÅ‡∏•‡∏∞‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏≠‡πà‡∏≤‡∏ô `.xml` ‡πÉ‡∏ô `db/db-changelog-master.xml` ‡∏ú‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ drop ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏™‡∏°‡∏≠‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢ create

```xml
<include file="/db/changelogs/view/drop.xml"/>

<include file="/db/changelogs/view/v_name_02.xml"/>
```

‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ï view ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡∏°‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô version ‡πÅ‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ô id `changeSet` ‡∏ó‡∏≥‡πÉ‡∏´‡πâ Spring Boot ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô id ‡πÉ‡∏´‡∏°‡πà ‡πÅ‡∏•‡∏∞‡∏°‡∏≤ Run .xml ‡∏ô‡∏±‡πâ‡∏ô‡πÜ

<center>. . .</center>

### Sequence

- **dropSequence**

```xml
<changeSet id="drop_table_users_DDMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <sequenceExists sequenceName="seq_users_id" />
    </preConditions>

    <dropSequence sequenceName="seq_users_id"/>
</changeSet>
```

- **SQL**

```xml
<changeSet id="create_sequence_hibernate_sequence_DMMYYYY" author="author_name">
    <preConditions onFail="MARK_RAN">
        <not>
            <sequenceExists sequenceName="hibernate_sequence"/>
        </not>
    </preConditions>
    <sql>
        CREATE SEQUENCE hibernate_sequence;
    </sql>
</changeSet>
```

<center>. . .</center>

### Data

‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö master data ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ set up project ‡πÄ‡∏ä‡πà‡∏ô parameter ‡∏ï‡πà‡∏≤‡∏á‡πÜ 

- **Insert**

‡∏≠‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô member ‡∏ï‡∏±‡πâ‡∏á‡∏ï‡πâ‡∏ô ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô admin ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏ô 
‡πÅ‡∏•‡∏∞‡πÉ‡∏ô `preConditions` ‡∏ú‡∏°‡∏à‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô sql ‡πÄ‡∏ä‡πá‡∏Ñ‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ member ‡∏ô‡∏µ‡πâ

```xml
<changeSet author="author_name" id="insert_member_DDMMYYYY">
    <preConditions onFail="MARK_RAN">
        <and>
            <tableExists tableName="member" />
        </and>
        <and>
            <sqlCheck expectedResult="0">
                select count(id) from member where name = 'admin';
            </sqlCheck>
        </and>
    </preConditions>
    <sql>
        INSERT INTO public."member"
        (id, created_by, created_date, updated_by, updated_date, name)
        VALUES(default,'system',now(),'system',null,'admin');
    </sql>
</changeSet>
```
--- 

‡∏ã‡∏∂‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏Å‡πá‡∏à‡∏∞‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ ‡∏à‡∏∞‡∏°‡∏≤‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡∏±‡∏ö‡∏ã‡πâ‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö Database ‡∏î‡πâ‡∏ß‡∏¢ ‡∏¢‡∏±‡∏á‡∏°‡∏µ Function ‡∏≠‡∏µ‡∏Å‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ú‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô
‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏ô‡∏≥‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á Liquibase ‡∏°‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Blog ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ú‡∏°‡πÑ‡∏î‡πâ‡∏ô‡∏≥‡πÑ‡∏õ‡∏ä‡πâ‡πÉ‡∏ô Project ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏à‡∏£‡∏¥‡∏á‡πÜ ‡πÅ‡∏•‡∏∞‡∏°‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤ Human error ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡∏Å‡πÄ‡∏•‡∏¢‡∏ó‡∏µ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß 
‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà Deploy ‡∏ú‡∏°‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏≤‡∏ô‡∏±‡πà‡∏á‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏•‡∏∑‡∏° Run script ‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡πà‡∏≤ ‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡∏ï‡∏Å‡∏´‡∏•‡πà‡∏ô‡πÑ‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà(‡∏ñ‡πâ‡∏≤‡∏ï‡∏≠‡∏ô dev ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏µ‡πÉ‡∏Ñ‡∏£‡πÑ‡∏õ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£ manual ‡∏ó‡∏µ‡πà db ‡∏≠‡πà‡∏∞‡∏ô‡∏∞) 
‡∏ú‡∏°‡∏´‡∏ß‡∏±‡∏á‡∏ß‡πà‡∏≤ Blog ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå‡πÑ‡∏°‡πà‡∏°‡∏≤‡∏Å‡∏Å‡πá‡∏ô‡πâ‡∏≠‡∏¢‡πÅ‡∏Å‡πà‡∏ú‡∏π‡πâ‡∏≠‡πà‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å‡∏ó‡πà‡∏≤‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö üòÖ 

