---
title: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡∏°‡∏µ Tools ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô LINE
date: "2023-09-04"
tags: ["node", "line","linebot"]
draft: false
summary: "‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡πÑ‡∏°‡πà‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£ ‡∏Å‡πá‡∏Ñ‡∏á‡∏à‡∏∞‡∏™‡∏∞‡∏î‡∏ß‡∏Å‡∏ô‡πà‡∏≤‡∏î‡∏π ‡πÄ‡∏•‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ LINE Bot"
layout: PostSimple
featureImage: "/static/images/blog/personal-tool-line/cover.png"
---

<center>![Cover](/static/images/blog/personal-tool-line/cover.png)</center>
<center className="text-xs">
  ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å
  [https://bs-uploads.toptal.io](https://bs-uploads.toptal.io/blackfish-uploads/components/seo/content/og_image_file/og_image/1020542/chatbot-fails-b7e2373d46845ca189f736687c435770.png)
</center>

‡∏à‡∏∏‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏ú‡∏°‡πÑ‡∏î‡πâ‡πÑ‡∏õ‡∏î‡∏π Video ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì [dtinth](https://dt.in.th/) ‡∏ä‡∏∑‡πà‡∏≠ Video ‡∏ß‡πà‡∏≤ [Let‚Äôs build a personal assistant bot and level up your coding skills!](https://youtu.be/IdFX7nwD744)
‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ú‡∏°‡∏î‡∏π‡∏à‡∏ô‡∏à‡∏ö ‡∏ú‡∏°‡∏™‡∏ô‡πÉ‡∏à‡∏°‡∏≤‡∏Å‡πÜ(‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏à‡∏∞‡∏ï‡∏∑‡πà‡∏ô‡πÄ‡∏ï‡πâ‡∏ô‡∏Å‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏ó‡∏≥) ‡πÅ‡∏•‡∏∞‡∏ú‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏°‡∏±‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ !!

## ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ‡∏ö‡πâ‡∏≤‡∏á ?

<center>![Cover](/static/images/blog/personal-tool-line/maping.png)</center>

‡∏´‡∏•‡∏±‡∏Å‡πÜ‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏ö‡πà‡∏á‡∏≠‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 2 Process

1. **LINE** - ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ú‡∏°‡πÄ‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏û‡∏π‡∏î‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Bot ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ [Janalyze](#janalyze)
2. **Custom Service** - ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ù‡∏±‡πà‡∏á‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å LINE ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏ï‡∏≤‡∏° Logic ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏¢‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á Text ‡πÅ‡∏•‡∏∞ Image ‡∏ú‡∏°‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤ [Jasistant](#jasistant)

<br />

<center>. . .</center>

<br />

### Janalyze

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà [LINE Developers](https://developers.line.biz/en/) ‡πÅ‡∏•‡πâ‡∏ß Login ‡∏à‡∏∞‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ

![Cover](/static/images/blog/personal-tool-line/console.png)

<br />

2. ‡∏™‡∏£‡πâ‡∏≤‡∏á Providers (‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà 1 ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create"**) ‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡πÑ‡∏î‡πâ

![Cover](/static/images/blog/personal-tool-line/create-pro.png)

<br />

3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Create a Messaging API channel"**

![Cover](/static/images/blog/personal-tool-line/choose.png)

<br />

4. ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö ‡πÅ‡∏•‡πâ‡∏ß **"Create"**

![Cover](/static/images/blog/personal-tool-line/channel-create.png)

<br />

5. ‡∏°‡∏≤‡∏ó‡∏µ‡πà **"Messaging API"** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà **"Webhook settings"** ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç **"Webhook URL"**
   ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô HTTPS ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤ Bot ‡∏à‡∏∞‡∏°‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏Å URL ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡πÑ‡∏õ‡πÄ‡∏™‡∏°‡∏≠

![Cover](/static/images/blog/personal-tool-line/webhook-url.png)

<br />

6. ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Scan QR Code ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô Bot ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Line Bot 

![Cover](/static/images/blog/personal-tool-line/qr.png)

<br />

<center>. . .</center>

<br />

### Jasistant

‡∏ï‡∏≠‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏£‡∏Å‡∏ú‡∏°‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ URL ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô HTTPS ‡πÅ‡∏•‡∏∞‡∏ú‡∏°‡∏≠‡∏¢‡∏≤‡∏Å‡∏£‡∏µ‡∏ö‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏ú‡∏°‡πÄ‡∏•‡∏¢‡πÑ‡∏õ‡πÉ‡∏ä‡πâ [Glitch](https://glitch.com/)
‡πÄ‡∏õ‡πá‡∏ô IDE ‡∏ö‡∏ô Browser ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏≠‡∏≤ URL ‡∏Ç‡∏ß‡∏≤‡∏ö‡∏ô‡∏°‡∏≤‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Line Bot ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Service ‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏à‡∏£‡∏¥‡∏á‡πÜ
‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô‡∏ô‡∏∞ ‡∏Ñ‡∏ß‡∏£‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏Ç‡∏∂‡πâ‡∏ô Github ‡πÅ‡∏•‡πâ‡∏ß‡∏´‡∏≤ Host ‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏î‡∏µ‡πÜ

![Cover](/static/images/blog/personal-tool-line/glitch.png)

*‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡πÄ‡∏£‡∏≤‡πÅ‡∏Ñ‡πà‡πÉ‡∏™‡πà Log ‡∏≠‡∏∞‡πÑ‡∏õ‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÉ‡∏ô `/webhook` ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≠‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏≤ Bot*

‡∏û‡∏≠‡∏ú‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏•‡∏¢‡∏°‡∏≤‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô Custom Service ‡πÅ‡∏•‡∏∞‡∏´‡∏≤ Host ‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏≠‡∏¢‡∏π‡πà ‡πÇ‡∏î‡∏¢‡∏°‡∏µ Tech Stack ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏ô‡∏µ‡πâ

- [Node.js](https://nodejs.org/en) - ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏´‡∏•‡∏±‡∏Å‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Backend Service
  - [promptpay-qr](https://github.com/dtinth/promptpay-qr) (NPM Package) -  ‡πÉ‡∏ä‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code ‡πÅ‡∏ö‡∏ö‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå
  - [tweetnacl-sealedbox-js](https://www.npmjs.com/package/tweetnacl-sealedbox-js) (NPM Package) - ‡∏™‡πà‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÅ‡∏ö‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏´‡∏±‡∏™
- [Express.js](https://expressjs.com/) - ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Framework ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö Node.js
- [Vercel](https://vercel.com/) - ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô Hosting ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏±‡∏ô‡∏ü‡∏£‡∏µ‡πÅ‡∏•‡∏∞ Custom ‡∏á‡πà‡∏≤‡∏¢‡∏°‡∏≤‡∏Å
- [Google Cloud Storage](https://cloud.google.com/storage) (‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û) - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡πÉ‡∏´‡πâ Bot ‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏≠‡∏∞‡πÑ‡∏£‡∏™‡∏±‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- [Google Cloud Vision AI](https://cloud.google.com/vision) (‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û) - ‡πÄ‡∏õ‡πá‡∏ô AI ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≤‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- [Airtable](https://www.airtable.com/) (‡∏ö‡∏±‡∏ô‡∏ó‡∏±‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢) - ‡πÄ‡∏õ‡πá‡∏ô Database ‡πÅ‡∏ö‡∏ö‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏°‡∏π‡∏•‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö ‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢ 
‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πà‡∏≤‡∏á‡πÜ‡∏ú‡πà‡∏≤‡∏ô App ‡πÉ‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢‡πÅ‡∏•‡∏∞ Export ‡πÄ‡∏õ‡πá‡∏ô Excel ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢ ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢‡∏û‡∏≠‡∏™‡∏°‡∏Ñ‡∏ß‡∏£‡πÅ‡∏Ñ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡πâ‡∏ß‡∏•‡πá‡∏≠‡∏Ñ‡∏≠‡∏¥‡∏ô ‡∏™‡∏£‡πâ‡∏≤‡∏á Workspace ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢

> üñ•Ô∏è [Jasistant Source Code](https://github.com/Janescience/jasistant)

{/* <br />

<center>. . .</center>

<br />

### Structure

![Cover](/static/images/blog/personal-tool-line/structure.png)


<br />

<center>. . .</center>

<br />

### Server properties

```js:server.js
// Import NPM
const express = require('express');
const bodyParser = require('body-parser')
const path = require("path");
const errorHandler  = require('./src/middlewares/error-handler');
const dotenv = require('dotenv');
dotenv.config();

// Initialize express app 
const app = express();
app.use(express.json({limit:'50mb'}))
app.use(express.urlencoded({limit: '50mb', extended:true }))
app.use(express.static(path.join(__dirname, '/public')))
app.use(bodyParser.text())

// Routes setup  
require('./src/routes/webhook.routes')(app);

// Basic route
app.get(["/","/index.html"],(req,res) => {
  res.sendFile(path.join(__dirname, 'views','index.html'));
})

// Not found route
app.all("*", (req,res) => {
  res.status(404);
  if(req.accepts('html')){
    res.sendFile(path.join(__dirname, 'views','404.html'));
  } else if (req.accepts('json')) {
    res.json({error : "404 Not Found"});
  }else {
    res.type('txt').send('404 Not Found')
  }
})

//Error handler
app.use(errorHandler)

//App started
app.listen(process.env.PORT, () => {
  console.log("Server is running on port : ",process.env.PORT);
})
```

#### Comments

- ***Import NPM*** - ‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ Code ‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ NPM ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ‡∏Å‡πá‡πÉ‡∏´‡πâ Import ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á Install ‡∏ú‡πà‡∏≤‡∏ô `npm` ‡∏Å‡πà‡∏≠‡∏ô‡∏î‡πâ‡∏ß‡∏¢
  ```bash
  npm i express body-parser dotenv
  ```
- ***Initialize Express App*** - ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ü‡∏£‡∏°‡πÄ‡∏ß‡∏¥‡∏£‡πå‡∏Ñ Express ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô Limit ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‡∏´‡∏£‡∏∑‡∏≠ Path ‡∏Ç‡∏≠‡∏á Static file
- ***Routes Setup*** - ‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ App ‡∏°‡∏µ Routes ‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á ‡πÇ‡∏î‡∏¢‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Å‡∏≥‡∏´‡∏ô‡∏î HTTP Method ‡πÅ‡∏¢‡∏Å Path ‡∏ï‡∏≤‡∏°‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å URL ‡∏°‡∏≤‡∏ó‡∏µ‡πà `/webhook` ‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ `webhook.controller`
  ```js:webhook.routes.js
  const controller = require("../controllers/webhook.controller");
  const { logger } = require("../middlewares/log-events");
  module.exports = function(app) {
    app.use(function(req, res, next) {
      res.header(
        "Access-Control-Allow-Headers",
        "x-access-token, Origin, Content-Type, Accept"
      );
      next();
    });

    app.post('/webhook',[logger],controller.webhook);
  };
  ```
  
- ***Basic Route*** - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Default Path ‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ URL `/` ‡∏´‡∏£‡∏∑‡∏≠ `/index.html` ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á‡∏´‡∏£‡∏∑‡∏≠ Redirect ‡πÑ‡∏õ‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏´‡∏ô 
  ```html:index.html
  <div id="main">
    <div class="fof">
        <h1>Welcome Jasistant Engine</h1>
    </div>
  </div>
  ```
- ***Not Found Route*** - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤ URL ‡∏≠‡∏∞‡πÑ‡∏£‡∏Å‡πá‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô App ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏∞‡πÑ‡∏£ ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ `404.html`
  ```html:404.html
  <div id="main">
    <div class="fof">
        <h1>Error 404</h1>
    </div>
  </div>
  ```
- ***Error Handler*** - ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ Error ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏ï‡∏≤‡∏° Process ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `/src/middlewares/error-handler`
  ```js:error-handler.js
  const { logEvents } = require('./log-events');

  const errorHandler = (err,req,res,next) => {
      logEvents(`${err.name} : ${err.message}`);
      res.status(500).send(err);
  }

  module.exports = errorHandler;
  ```
  - **errorHandler** - ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î Error ‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á Log ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ú‡πà‡∏≤‡∏ô `logEvent` ‡πÅ‡∏•‡∏∞ Return ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢ Error code = 500 ‡πÄ‡∏™‡∏°‡∏≠
  ```js:log-event.js
  const { format } = require('date-fns');
  const { v4:uuid } = require('uuid');

  const logEvents = async (message) => {
      const dateTime = `${format(new Date(),'yyyyMMdd\tHH:mm:ss')}`;
      const logItem = `${dateTime}\t${uuid()}\t${message}\n`;
      console.log(logItem)
  }

  const logger = (req,res,next) => {
      if(req.body){
          console.log(`${req.method} ${req.path} ${JSON.stringify(req.body)}`);
      }else{
          console.log(`${req.method} ${req.path}`);
      }
      next();
  }

  module.exports = { logger , logEvents};
  ```
  - **logEvents** - ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î Format ‡∏Ç‡∏≠‡∏á Log ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÑ‡∏î‡πâ‡∏à‡∏∞‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ‡∏ï‡∏£‡∏á‡πÑ‡∏´‡∏ô
  - **logger** - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ Log ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Request ‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤ ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏∞‡πÉ‡∏™‡πà‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏™‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞ Path ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.routes.js`
- ***App Started*** - ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ Running ‡∏ó‡∏µ‡πà PORT ‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ú‡∏°‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡πÉ‡∏ô `process.env.PORT` 
‡πÅ‡∏•‡∏∞‡πÉ‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô `listen` ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏î‡πâ‡∏ß‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á‡∏ï‡∏≠‡∏ô Start project ‡∏ú‡∏°‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á Log ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡∏ß‡πà‡∏≤ Run ‡∏ó‡∏µ‡πà PORT ‡∏≠‡∏∞‡πÑ‡∏£
  ```js:.env
  PORT=3000
  ```

<br />

<center>. . .</center>

<br />

### Config

```js:/config/line.config.js
const dotenv = require('dotenv');
dotenv.config();

const config = () => {
    return { 
        channelAccessToken: process.env.LINE_CHANNEL_ACCESS_TOKEN,
        channelSecret: process.env.LINE_CHANNEL_SECRET
    }
}

module.exports = config
```

- ‡πÉ‡∏ä‡πâ `dotenv` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `.env` ‡πÑ‡∏î‡πâ
- *LINE_CHANNEL_ACCESS_TOKEN* ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å **Messaging API** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏õ‡∏Ç‡πâ‡∏≤‡∏á‡∏•‡πà‡∏≤‡∏á‡∏™‡∏∏‡∏î‡∏î‡∏π‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ **Channel access token**
- *LINE_CHANNEL_SECRET* ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å **Basic settings** ‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ **Channel secret**

<br />

<center>. . .</center>

<br />

### Service

```js:/services/message.service.js

const expenseTracking = require("../modules/expense-tracking.module")
const qrcodePromptpay = require("../modules/qrcode-promptpay.module")

const category = {
  t: "transportation",
  f: "food",
  e: "electronic",
  d: "drinks",
  c: "clothes",
  a: "alcohal",
  g: "game",
  h: "health",
  m: "miscellaneous",
  o: "occasion",
  l: "lodging"
}

const messageService = async (message) =>{
    message = message.trim()
    let match
    
    if (match = message.match(/^([\d.]+|[ivxlcdm]+)([tfedcaghmol])([ \w]+|)$/i)) {
      const m = match
      
      const enteredAmount = +m[1]
      const amount = enteredAmount.toFixed(2)
      const ctg = category[m[2].toLowerCase()]
      const name = m[3] ? m[3] : ""

      return await expenseTracking(null,name,amount, ctg)
    }else if(match = message.match(/^(expctg)$/i)){
      return {message :  JSON.stringify(category,null,4) }
    }else if(match = message.match(/^(qr)([\d.]+)$/i)){
      const m = match
      const amount = Number(match[2])
      return await qrcodePromptpay(amount)
    }
}

module.exports = messageService;
```

<br />

<center>. . .</center>

<br />

### Utilities

#### Line
```js:/utilities/line.utility.js
const toMessages = (data) => {
  if (!data) data = "Data reply is undefined..."
  if (typeof data === "string") data = [{ type: "text", text: data }]
  return data
}
  
const createBubble = (
  title,
  text,
  {
    headerBackground = "#353433",
    headerColor = "#d7fc70",
    textSize = "xl",
    altText = String(text),
    footer
  } = {}
) => {
  const data = {
    type: "bubble",
    styles: {
      header: { backgroundColor: headerBackground }
    },
    header: {
      type: "box",
      layout: "vertical",
      contents: [
        { type: "text", text: title, color: headerColor, weight: "bold" }
      ]
    },
    body:
      typeof text === "string"
        ? {
            type: "box",
            layout: "vertical",
            contents: [{ type: "text", text: text, wrap: true, size: textSize }]
          }
        : text
  }
  if (footer) {
    data.styles.footer = { backgroundColor: "#e9e8e7" }
    data.footer =
      typeof footer === "string"
        ? {
            type: "box",
            layout: "vertical",
            contents: [
              {
                type: "text",
                text: footer,
                wrap: true,
                size: "sm",
                color: "#8b8685"
              }
            ]
          }
        : footer
  }
  return {
    type: "flex",
    altText: truncate(`[${title}] ${altText}`, 400),
    contents: data
  }
}

const  truncate = (text, maxLength) => {
  return text.length + 5 > maxLength
    ? text.substr(0, maxLength - 5) + "‚Ä¶"
    : text
}

const readAsBuffer = (stream) => {
  return new Promise((resolve, reject) => {
    stream.on("error", e => {
      reject(e)
    })
    const bufs = []
    stream.on("end", () => {
      resolve(Buffer.concat(bufs))
    })
    stream.on("data", buf => {
      bufs.push(buf)
    })
  })
}
  
const utility = {
  toMessages,
  createBubble,
  readAsBuffer
};

module.exports = utility;
  
```


- **toMessage** - ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÉ‡∏ô Line(Bot ‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡∏≤) ‡πÅ‡∏ö‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏ß‡πà‡∏≤‡∏à‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô String ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô 
- **createBubble** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡πÅ‡∏ö‡∏ö Flex Message ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡πâ‡∏Å‡∏î‡πÑ‡∏î‡πâ ‡∏à‡∏±‡∏î‡πÅ‡∏ö‡∏ö‡∏ü‡∏≠‡∏£‡πå‡∏°‡πÅ‡∏•‡∏∞‡∏ï‡∏≥‡πÅ‡∏´‡∏ô‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≤‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
‡πÇ‡∏î‡∏¢‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á Layout ‡πÑ‡∏ß‡πâ‡∏´‡∏°‡∏î‡πÅ‡∏•‡πâ‡∏ß‡πÅ‡∏•‡∏∞‡∏£‡∏±‡∏ö‡πÄ‡∏≠‡∏≤‡πÅ‡∏Ñ‡πà‡∏ö‡∏≤‡∏á‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ ‡∏≠‡πà‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà [Flex Message](https://developers.line.biz/en/docs/messaging-api/using-flex-messages/) 
- **truncate** - ‡πÉ‡∏ô‡∏Å‡∏£‡∏ì‡∏µ‡∏ó‡∏µ‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏ß‡πÄ‡∏Å‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏à‡∏∞‡πÉ‡∏´‡πâ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô *...*
- **readAsBuffer** - ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô Content ‡πÄ‡∏õ‡πá‡∏ô Buffer ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡πÑ‡∏õ‡∏™‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ Cloud ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ


<br/>

#### Storage

```js:/utilities/storage.utility.js
const { Storage } = require("@google-cloud/storage")
const { nanoid } = require("nanoid")

const storage = new Storage(
  {
    projectId: process.env.GCS_PROJECT_ID,
    scopes: 'https://www.googleapis.com/auth/cloud-platform',
    credentials: {
      client_email: process.env.GCS_EMAIL,
      private_key: process.env.GCS_PRIVATE_KEY
    }
  }
);

const putBlob = async (buffer, extension) => {
  const blobName = nanoid() + extension
  await storage
    .bucket("tmpblobimg")
    .file(blobName)
    .save(buffer)
  return blobName
}

const getBlob = async (blobName) => {
  const response = await storage
    .bucket("tmpblobimg")
    .file(blobName)
    .download()
  return response[0]
}

const deleteBlob = async (blobName) => {
  await storage
    .bucket("tmpblobimg")
    .file(blobName)
    .delete();
}

const getBlobUrl = async (blobName) => {
  const result = await storage
    .bucket("tmpblobimg")
    .file(blobName)
    .getSignedUrl({
      action: "read",
      expires: new Date(Date.now() + 86400e3),
      version: "v4",
      virtualHostedStyle: true
    })
  return result[0]
}

const cloudStorage = {
  putBlob,
  getBlob,
  deleteBlob,
  getBlobUrl
};

module.exports = cloudStorage;

```

- **storage** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ Authorization storage ‡πÉ‡∏ô Cloud ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ Project ID , Email ‡πÅ‡∏•‡∏∞ Private Key


<br />

<center>. . .</center>

<br />

### Modules

#### Expense Tracking
```js:/modules/expense-tracking.module.js
const Airtable = require("airtable");
const { AirtableRecord } = require("airtable");
const { createBubble } = require("../utilities/line.utility");

const expenseTable = () => {
  return new Airtable({ apiKey: process.env.AIRTABLE_API_KEY })
    .base(process.env.AIRTABLE_EXPENSE_BASE)
    .table("Expense Records");
};

const expenseTracking = async (time,name,amount, category) => {
  const date = time ? time : new Date();
  // Airtable
  const recorded = await expenseTable().create(
    {
      Name: name.trim(),
      Date: date,
      Category: category,
      Amount: amount,
    },
    { typecast: true }
  );
  const body = {
    type: "box",
    layout: "vertical",
    contents: [
      {
        type: "text",
        text: "‡∏ø" + amount,
        size: "xxl",
        weight: "bold",
      },
      {
        type: "text",
        text: `${category}${name ? "\n" + name.trim() : ""}`,
        wrap: true,
      },
    ],
    action: {
      type: "uri",
      label: "Open Airtable",
      uri: process.env.AIRTABLE_EXPENSE_URI + "/" + recorded.getId(),
    },
  };
  const footer = await summary();
  const bubble = createBubble("Expense Tracking", body, {
    headerColor: "#f7f7f2",
    footer: {
      type: "box",
      layout: "horizontal",
      spacing: "sm",
      contents: footer.map(([label, text]) => ({
        type: "box",
        layout: "vertical",
        contents: [
          {
            type: "text",
            text: label,
            color: "#8b8685",
            size: "xs",
            align: "end",
          },
          {
            type: "text",
            text: text,
            color: "#8b8685",
            size: "sm",
            align: "end",
          },
        ],
      })),
      action: {
        type: "uri",
        label: "Open Airtable",
        uri: process.env.AIRTABLE_EXPENSE_URI,
      },
    },
  });
  return {message:bubble};
};

const summary = async () => {
  const date = new Date().toJSON().split("T")[0];
  const tableData = await expenseTable().select().all();
  const normalRecords = tableData.filter((r) => !r.get("Occasional"));
  const records = AirtableRecord;
  const total = (records) => records.map((r) => +r.get("Amount") || 0).reduce((a, b) => a + b, 0);
  const firstDate = normalRecords
    .map((r) => (r.get("Date") ? r.get("Date").split("T")[0] : r.get("Date")))
    .reduce((a, b) => (a < b ? a : b), date);

  const todayUsage = total(
    normalRecords.filter(
      (r) => (r.get("Date") ? r.get("Date").split("T")[0] : r.get("Date")) === date
    )
  );
  const dayNumber = Math.round((Date.parse(date) - Date.parse(firstDate)) / 86400e3) + 1;
  const $ = (v) => `‡∏ø${v.toFixed(2)}`;

  return [
    ["Today", $(todayUsage)], //‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
    ["Day", `${dayNumber}`], //‡∏£‡∏ß‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô
  ];
};

module.exports = expenseTracking;

```
- **expenseTable** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ Airtable ‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô‡πÅ‡∏•‡∏∞ Table ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡πà‡∏≤‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢ APIKEY ‡πÅ‡∏•‡∏∞ BASE ID ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏£‡∏á‡∏ä‡∏∑‡πà‡∏≠ Table ‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á
‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
  - **AIRTABLE_API_KEY** (APIKEY) - ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà [APIKEY](https://airtable.com/create/apikey)
  - **AIRTABLE_EXPENSE_BASE** (BASE ID) - ‡πÄ‡∏õ‡πá‡∏ô Base ID ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö Base ‡∏≠‡∏±‡∏ô‡πÑ‡∏´‡∏ô ‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏à‡∏≤‡∏Å URL ‡πÇ‡∏î‡∏¢‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å ‡∏´‡∏•‡∏±‡∏á `.com/` ‡πÄ‡∏ä‡πà‡∏ô 
  https://airtable.com/app1brOBAd2BLsotU/tbltpKT3ZVDRoo8zG/viwvm85L6NKZcvifX?blocks=hide ‡∏Å‡πá‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤‡∏Ñ‡πà‡∏≤ **app1brOBAd2BLsotU** ‡∏°‡∏≤‡πÉ‡∏ä‡πâ
- **expenseTracking** - ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Flex Message ‡πÑ‡∏°‡πà‡∏ß‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô body, footer, action 
- **summary** - ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏£‡∏ß‡∏°‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞‡∏ß‡∏±‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡∏°‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏µ‡πà‡∏ß‡∏±‡∏ô

<br/>

#### QRCode Promptpay

```js:/modules/qrcode-promptpay.module.js
const qrcode = require('qrcode')
const generatePayload = require('promptpay-qr')
const { putBlob,getBlobUrl } = require('../utilities/storage.utility')

const generateQrcode = async (amount) => {

  const mobileNumber = '080-608-XXXX'
  const payload = generatePayload(mobileNumber, { amount })
  
  const bufferImage = await qrcode.toBuffer(payload, {
      type: 'jpg',
      errorCorrectionLevel: 'H',
  });

  const blobName = await putBlob(bufferImage, ".jpg")
  const blobUrl = await getBlobUrl(blobName)

  const message = 
  [
    {
      type: 'image',
      originalContentUrl: blobUrl,
      previewImageUrl: blobUrl
    },
    {
      type: "text",
      text: `${amount} ‡∏ö‡∏≤‡∏ó`,
    }
  ]
  
  return {
      message: message,
      blobName : blobName
    }
}

module.exports = generateQrcode;

```

- **qrcode** (NPM Packages) - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á Payload ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ QRCode
- **promptpay-qr** (NPM Packages) - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏™‡∏£‡πâ‡∏≤‡∏á Payload ‡∏ó‡∏µ‡πà‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á QRCode ‡∏à‡∏≤‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô
- **generateQrcode** - 
--- */}

<br />

<center>. . .</center>

<br />

## ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

1. **Expense Record** - ‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô‡∏ß‡πà‡∏≤‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏°‡∏µ‡πÅ‡∏≠‡∏õ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö-‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏´‡∏°‡∏î ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ô‡∏±‡πâ‡∏ô
   ‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2-3 step ‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å ‡πÅ‡∏ï‡πà Line Bot ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡πÅ‡∏Ñ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÄ‡∏ä‡πà‡∏ô ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ "60f" ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏≠‡∏Å‡∏ß‡πà‡∏≤ ‡∏à‡πà‡∏≤‡∏¢‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏õ 60 ‡∏ö‡∏≤‡∏ó‡∏ô‡∏∞
   ‡πÅ‡∏•‡∏∞ Bot ‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏î‡πâ‡∏ú‡πà‡∏≤‡∏ô [Airtable](https://www.airtable.com/)

| ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á "60f"                                           | ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á "145d startbuck"                                  |
| ------------------------------------------------------ | -------------------------------------------------------- |
| ![60f](/static/images/blog/personal-tool-line/60f.jpg) | ![145d](/static/images/blog/personal-tool-line/145d.jpg) |

| Airtable(Rows)                                                        | Airtable(Detail)                                                          |
| --------------------------------------------------------------------- | ------------------------------------------------------------------------- |
| ![Airtable Rows](/static/images/blog/personal-tool-line/airtable.jpg) | ![Airtable Detail](/static/images/blog/personal-tool-line/air-detail.jpg) |

<br />

<center>. . .</center>

<br />

2. **QR Code Promptpay** - ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏î‡πâ QR ‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô 100 ‡∏ö‡∏≤‡∏ó ‡∏Å‡πá‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ß‡πà‡∏≤ "qr100" ‡∏Å‡πá‡∏à‡∏∞‡πÑ‡∏î‡πâ QR Code ‡∏ó‡∏µ‡πà‡∏•‡πá‡∏≠‡∏Ñ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏ß‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏¢ (‡∏•‡∏≠‡∏á Scan ‡∏î‡∏π‡πÑ‡∏î‡πâ)
   ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡πà‡∏≤‡∏ß‡πÜ ‡∏Ñ‡∏∑‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á QR Code ‡πÄ‡∏õ‡πá‡∏ô Buffer ‡πÅ‡∏•‡πâ‡∏ß Upload ‡∏Ç‡∏∂‡πâ‡∏ô Google Cloud Storage ‡∏™‡πà‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô Url ‡πÅ‡∏•‡∏∞ Reply ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ú‡πà‡∏≤‡∏ô Line ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û

![QR Code](/static/images/blog/personal-tool-line/qrcode.png)

<br />

<center>. . .</center>

<br />

3. **Image to Text** - ‡∏™‡πà‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏≠‡∏∞‡πÑ‡∏£‡πÑ‡∏õ‡∏Å‡πá‡πÑ‡∏î‡πâ ‡πÅ‡∏•‡πâ‡∏ß Bot ‡∏à‡∏∞‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÅ‡∏•‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏°‡∏ä‡∏±‡∏î‡∏Ç‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û ‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÑ‡∏ó‡∏¢‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏à‡∏∞‡πÄ‡∏ß‡πâ‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÜ
   ‡πÑ‡∏°‡πà‡∏ï‡∏¥‡∏î‡∏Å‡∏±‡∏ô ‡∏ã‡∏∂‡πà‡∏á‡∏ú‡∏°‡∏Å‡πá‡πÑ‡∏°‡πà‡∏ó‡∏£‡∏≤‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ [Google Cloud Vision AI](https://cloud.google.com/vision)

![QR Code](/static/images/blog/personal-tool-line/imgtotxt1.png)

‡∏ã‡∏∂‡πà‡∏á‡∏ñ‡πâ‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏•‡∏≤‡∏¢‡∏°‡∏∑‡∏≠ Bot ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏≠‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏≠‡∏≠‡∏Å‡∏ö‡∏≤‡∏á‡∏Ñ‡∏≥ ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ï‡∏Å‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ **"‡πÄ‡∏Ñ‡πâ‡∏≤‡πÅ‡∏Ñ‡πà‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏≤‡∏Å"** ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡∏ß‡πà‡∏≤ **"‡∏á‡∏î‡∏£‡∏µ‡πÇ‡∏û‡∏™"** ‡πÑ‡∏î‡πâ‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô **"‡∏á‡∏î ‡∏£‡∏µ‡∏° ‡∏™"**

![QR Code](/static/images/blog/personal-tool-line/imgtotxt2.png)

‡πÅ‡∏ï‡πà‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ó‡∏µ‡πà‡∏û‡∏¥‡∏°‡∏û‡πå‡πÄ‡∏≠‡∏≤‡πÅ‡∏•‡∏∞‡∏ñ‡πà‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô ‡∏Ñ‡πà‡∏≠‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á 100% ‡∏ô‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£‡∏ô‡∏±‡πâ‡∏ô‡∏à‡∏∞‡πÄ‡∏•‡πá‡∏Å‡∏°‡∏≤‡∏Å‡πÜ
