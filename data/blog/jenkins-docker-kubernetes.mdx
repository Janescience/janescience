---
title: Deploy Spring-Boot Application to Kubernetes(Minikube) with Jenkins CI/CD Pipeline
date: "2023-10-23"
tags: ["jenkins","docker","kubernetes"]
draft: false
summary: "‡∏ó‡∏≥ CI/CD ‡∏î‡πâ‡∏ß‡∏¢ Jenkins ‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Pipeline Deploy to Kubernetes ‡πÇ‡∏î‡∏¢‡πÉ‡∏ä‡πâ 'docker' & `kubectl` ‡πÅ‡∏•‡∏∞ Application ‡πÄ‡∏õ‡πá‡∏ô Spring Boot "
layout: PostSimple
featureImage: "/static/images/blog/jenkins-docker-kubernetes/cover.jpeg"
---

<center>![Git Workflow](/static/images/blog/jenkins-docker-kubernetes/cover.jpeg)</center>

<center className="text-xs">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏à‡∏≤‡∏Å [https://www.weave.works](https://www.weave.works/assets/images/blt0e0b20ea61123a17/Create_A_CI_CD_Pipeline_With_Kubernetes_and_Jenkins.jpeg) </center>

‡∏ö‡∏ó‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏µ‡πâ ‡∏ú‡∏°‡∏Ç‡∏≠‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏£‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ Docker ‡πÅ‡∏•‡∏∞ Kubernetes ‡∏ß‡πà‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£ ‡πÅ‡∏ï‡πà‡∏à‡∏∞ Focus ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£ Setup Jenkins ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Deploy ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô

## Jenkins

**Jenkins** ‡∏Ñ‡∏∑‡∏≠ ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡∏ä‡πà‡∏ß‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏≤‡∏£ Deployment ‡∏™‡∏∞‡∏î‡∏ß‡∏Å ‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‡πÅ‡∏•‡∏∞‡∏á‡πà‡∏≤‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô‡πÉ‡∏ô One click ‡∏ã‡∏∂‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ CI/CD ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á ‡πÉ‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô‡∏Å‡πá‡∏°‡∏µ‡∏´‡∏•‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡∏°‡∏≤‡∏Å‡πÜ ‡πÅ‡∏ï‡πà‡∏ï‡∏±‡∏ß‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ô‡∏¥‡∏¢‡∏°‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡πÑ‡∏°‡πà‡∏Å‡∏µ‡πà‡∏ï‡∏±‡∏ß ‡πÅ‡∏•‡∏∞ Jenkins ‡∏Å‡πá‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏£‡∏±‡∏ö
‡πÇ‡∏î‡∏¢‡∏õ‡∏Å‡∏ï‡∏¥‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏≤‡∏£ Deploy ‡πÄ‡∏£‡∏≤‡∏à‡∏∞ Manual build ‡πÄ‡∏≠‡∏á‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡πÑ‡∏ü‡∏•‡πå‡∏ï‡πà‡∏≤‡∏á‡πÜ‡πÑ‡∏õ‡∏ß‡∏≤‡∏á‡πÉ‡∏ô Server ‡∏ó‡∏≥‡πÄ‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡∏•‡πà‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡πÜ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ Deploy ‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡πÜ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
‡∏ô‡∏±‡πà‡∏ô‡πÅ‡∏´‡∏•‡πà‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏Ñ‡∏á‡∏à‡∏∞‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡πÅ‡∏ï‡πà‡∏•‡πà‡∏∞‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ Deploy ‡πÑ‡∏î‡πâ‡∏î‡πâ‡∏ß‡∏¢‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡πÅ‡∏Ñ‡πà One click ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Config Jenkins ‡∏ô‡∏±‡πâ‡∏ô‡∏Å‡πá‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢‡∏ß‡∏¥‡∏ò‡∏µ‡∏à‡∏ô‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Script ‡πÄ‡∏≠‡∏á‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏Å‡∏±‡∏ô‡∏ß‡πà‡∏≤ Pipeline ‡∏ô‡∏±‡πà‡∏ô‡πÄ‡∏≠‡∏á

<br/>
<center>. . .</center>
<br/>

## Prerequire

- Java 11 or 17 
- [Jenkins](https://www.jenkins.io/) (Require Java)
    - Mac OS - `brew install jenkins-lts` (Install ‡∏ú‡πà‡∏≤‡∏ô Homebrew)
    - Windows - [Download Jenkins](https://www.jenkins.io/download/) (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Windows)
    - Linux - [Install Jenkins](https://www.jenkins.io/doc/book/installing/linux/)
- [Docker](https://www.docker.com/products/docker-desktop/)
- [minikube](https://minikube.sigs.k8s.io/docs/start/) (Require Docker)
- [kubectl](https://kubernetes.io/docs/tasks/tools/) 
- Spring-Boot Application ([Source Code](https://github.com/Janescience/discovery-service))

<br/>
<center>. . .</center>
<br/>

## Solution Overview

<center>![Overview](/static/images/blog/jenkins-docker-kubernetes/overview.png)</center>

1. Pull code ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏à‡∏≤‡∏Å ‚ÄãGithub ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏≤‡∏™‡∏±‡πà‡∏á Build  
2. Build .jar ‡∏î‡πâ‡∏ß‡∏¢ Maven 
3. Build docker image ‡∏î‡πâ‡∏ß‡∏¢ Dockerfile ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
4. Push docker image ‡πÑ‡∏õ‡∏¢‡∏±‡∏á Docker Hub (‡∏Ñ‡∏•‡πâ‡∏≤‡∏¢ Github ‡πÅ‡∏ï‡πà‡πÉ‡∏ä‡πâ‡πÄ‡∏Å‡πá‡∏ö Docker image)
5. Deploy Kubernetes ‡∏î‡πâ‡∏ß‡∏¢ Kubeconfig ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ ‡πÇ‡∏î‡∏¢ Kubernetes ‡∏à‡∏∞‡πÑ‡∏õ‡πÄ‡∏≠‡∏≤ Docker image ‡∏à‡∏≤‡∏Å Docker Hub ‡∏ï‡∏≤‡∏° Tag ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÑ‡∏ß‡πâ‡∏°‡∏≤ ‚ÄãDeploy

<br/>
<center>. . .</center>
<br/>

## Start Jenkins

- [Mac OS](https://phoenixnap.com/kb/install-jenkins-on-mac) (Method 1: Install Jenkins Using the Homebrew Package Manager)
- [Linux](https://www.jenkins.io/doc/book/installing/linux/) (Start Jenkins)
- [Windows](https://www.oreilly.com/library/view/hands-on-continuous-integration/9781789130485/5f1d3f8c-6ee0-499f-97ec-81b5feff6ff5.xhtml)

<br/>
<center>. . .</center>
<br/>

## Setup Jenkins (First Time)

1. ‡πÄ‡∏Ç‡πâ‡∏≤ Jenkins UI ‡∏î‡πâ‡∏ß‡∏¢ http://localhost:8080 (Default)
2. `cat /Users/[user]/.jenkins/secrets/initialAdminPassword` ‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÑ‡∏î‡πâ secret ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÉ‡∏™‡πà **Administrator password**
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Install suggested plugins** ‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à
4. ‡∏Å‡∏£‡∏≠‡∏Å Username ‡∏Å‡∏≥‡∏´‡∏ô‡∏î Password ‡πÅ‡∏•‡∏∞‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ 
5. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Save and Continue > Save and Finish > Start using Jenkins**

<br/>
<center>. . .</center>
<br/>

## Install Plugins

1. ‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Dashboard > Manage Jenkins > Plugins > Advanced settings**
2. [Download File](https://drive.google.com/u/2/uc?id=1SSL00SsCENFV5b0nl5N3DUSBjnqW7091&export=download) (Kubernetes Continuous Deploy PluginVersion1.0.0)
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Deploy Plugin** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Choose File** ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Upload Plugin ‡∏ó‡∏µ‡πà Download ‡∏°‡∏≤
4. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Deploy** ‡∏£‡∏≠‡∏à‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à

<br/>
<center>. . .</center>
<br/>

## Setup Credentials

‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Dashboard > Manage Jenkins > Credentials > System > Global credentials (unrestricted)**  ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å  **+ Add Credentilas**

1. Kubeconfig

‡∏Å‡∏≥‡∏´‡∏ô‡∏î ID ‡πÅ‡∏•‡∏∞ Description ‡πÄ‡∏õ‡πá‡∏ô **k8sconfigpwd**

![Kubeconfig](/static/images/blog/jenkins-docker-kubernetes/kubeconfig.png)

‡πÉ‡∏ä‡πâ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á `open .kube/config` (‡∏ï‡πâ‡∏≠‡∏á Start Minikube ‡∏Å‡πà‡∏≠‡∏ô `minikube start`) ‡∏à‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Config ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏ô Text ‡πÉ‡∏´‡πâ Copy ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤ ‡πÉ‡∏´‡πâ‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÉ‡∏ô **Content** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Create**

2. Docker Hub

![Kubeconfig](/static/images/blog/jenkins-docker-kubernetes/dockerconfig.png)

<br/>
<center>. . .</center>
<br/>

## Setup Maven

Spring-Boot Application ‡∏Ç‡∏≠‡∏á‡∏ú‡∏°‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ Maven ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£ Build ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÉ‡∏ä‡πâ Maven ‡∏Ç‡∏≠‡∏á Jenkins ‡πÄ‡∏≠‡∏≤

‡πÑ‡∏õ‡∏ó‡∏µ‡πà **"Dashboard > Manage Jenkins > Tools"** ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡∏ó‡∏µ‡πà **Maven installations**

![Maven](/static/images/blog/jenkins-docker-kubernetes/maven.png)

<br/>
<center>. . .</center>
<br/>

## File Require in Spring-Boot Application

```yml:/k8s/deployment.yml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: discovery-service-app
  labels:
    app: discovery-service-app
spec:
  revisionHistoryLimit: 0
  replicas: 2
  selector:
    matchLabels:
      app: discovery-service-app
  template:
    metadata:
      labels:
        app: discovery-service-app
    spec:
      containers:
        - name: discovery-service-app
          image: janescience/discovery-service:latest
          imagePullPolicy: Always
          ports:
            - containerPort: 9001
          resources:
            limits:
              cpu: 500m
            requests:
              cpu: 200m

```

```yml:/k8s/service.yml
apiVersion: v1
kind: Service
metadata:
  name: discovery-svc
spec:
  type : LoadBalancer
  ports:
    - port: 80
      targetPort: 9001
  selector:
    app: discovery-service-app
```

```yml:Dockerfile
FROM openjdk:17-jdk
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} discovery.jar
ENTRYPOINT ["java","-jar","discovery.jar"]
EXPOSE 9001
```

<br/>
<center>. . .</center>
<br/>


## Jenkins Pipeline

1. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Dashboard > + New Item"**
2. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Pipeline**
3. ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏•‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà **Pipeline** ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Pipeline script** ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Pipeline ‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô Script ‡∏ï‡∏≤‡∏°‡∏ô‡∏µ‡πâ

```bash
pipeline {
    agent any
    tools{
        maven 'maven_3_5_0'
    }
    environment {
        DOCKER_HOME = '/usr/local/bin/docker'  // Path to the Docker executable
    }
    stages{
        stage('Build Maven'){
            steps{
                checkout([$class: 'GitSCM', branches: [[name: '*/master']], extensions: [], userRemoteConfigs: [[url: 'https://github.com/Janescience/discovery-service']]])
                sh 'mvn clean install'
            }
        }
        stage('Build image'){
            steps{
                script{
                    sh '${DOCKER_HOME} build -t discovery-service:latest .'
                }
            }
        }
        
        stage('Push image to Hub'){
            steps{
                script{
                    withCredentials([usernamePassword(credentialsId: 'dockerhub-pwd', usernameVariable: 'DOCKER_USERNAME', passwordVariable: 'DOCKER_PASSWORD')]) {
                        sh '${DOCKER_HOME} login -u ${DOCKER_USERNAME} -p ${DOCKER_PASSWORD}'
                        sh '${DOCKER_HOME} tag discovery-service:latest janescience/discovery-service:latest'
                        sh '${DOCKER_HOME} push janescience/discovery-service:latest'
                        sh '${DOCKER_HOME} rmi -f $(${DOCKER_HOME} images -f "dangling=true" -q)'
                    }
                }
            }
        }
        stage('Deploy to k8s'){
            steps{
                script{
                    kubernetesDeploy (configs: 'k8s/deployment.yml',kubeconfigId: 'k8sconfigpwd')
                    kubernetesDeploy (configs: 'k8s/service.yml',kubeconfigId: 'k8sconfigpwd')
                }
            }
        
        }
    }
}
```

‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **Pipeline script from SCM**

‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏Å‡πá‡∏ö Script Pipeline ‡πÑ‡∏ß‡πâ‡πÉ‡∏ô Project ‡πÅ‡∏ó‡∏ô ‡πÇ‡∏î‡∏¢‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ß‡πà‡∏≤ **Jenkinsfile**

![Pipeline Git](/static/images/blog/jenkins-docker-kubernetes/pipelinegit.png)

‡πÅ‡∏•‡∏∞‡πÑ‡∏õ‡πÄ‡∏û‡∏¥‡πà‡∏° Github Credentials ‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô [Setup Credentials](#setup-credentials) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ Jenkins ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á Github ‡πÑ‡∏î‡πâ

<br/>
<center>. . .</center>
<br/>

## Deploy to Kubernetes

‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Project ‡πÅ‡∏•‡∏∞‡∏Å‡∏î **Build Now** ‡∏ñ‡πâ‡∏≤ Deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏Ç‡∏∂‡πâ‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏´‡∏°‡∏î‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ (‡∏ï‡πâ‡∏≠‡∏á Start minikube ‡∏Å‡πà‡∏≠‡∏ô)

![Jenkins Build](/static/images/blog/jenkins-docker-kubernetes/build.png)

‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏î‡∏π Logs ‡∏î‡∏π‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà **"Permalinks > Last build > Console Output"**

![Jenkins Logs](/static/images/blog/jenkins-docker-kubernetes/logs.png)

<br/>
<center>. . .</center>
<br/>

## Verify Kubernetes Deployed

```bash

~ kubectl get all

NAME                                         READY   STATUS    RESTARTS      AGE
pod/discovery-service-app-6747dd94f9-5bsxs   1/1     Running   0             18m
pod/discovery-service-app-6747dd94f9-w6dhb   1/1     Running   0             18m
pod/search-service-app-69b7c477b7-4w72l      1/1     Running   1 (16h ago)   17h
pod/search-service-app-69b7c477b7-6q4x5      1/1     Running   1 (16h ago)   17h
pod/search-service-app-69b7c477b7-hjkxb      1/1     Running   2 (16h ago)   17h
pod/search-service-app-69b7c477b7-jrgqh      1/1     Running   1 (16h ago)   17h
pod/search-service-app-69b7c477b7-pxm59      1/1     Running   1 (16h ago)   17h

NAME                    TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)        AGE
service/discovery-svc   LoadBalancer   10.111.56.231    <pending>     80:31604/TCP   18m
service/kubernetes      ClusterIP      10.96.0.1        <none>        443/TCP        19h
service/search-svc      LoadBalancer   10.106.152.162   <pending>     80:31202/TCP   19h

NAME                                    READY   UP-TO-DATE   AVAILABLE   AGE
deployment.apps/discovery-service-app   2/2     2            2           18m
deployment.apps/search-service-app      5/5     5            5           19h

NAME                                               DESIRED   CURRENT   READY   AGE
replicaset.apps/discovery-service-app-6747dd94f9   2         2         2       18m
replicaset.apps/search-service-app-69b7c477b7      5         5         5       19h

NAME                                                     REFERENCE                       TARGETS   MINPODS   MAXPODS   REPLICAS   AGE
horizontalpodautoscaler.autoscaling/search-service-app   Deployment/search-service-app   1%/200%   5         10        5          18h
```

‡πÉ‡∏ô minikube ‡∏à‡∏∞‡πÑ‡∏°‡πà Support External-IP ‡πÄ‡∏£‡∏≤‡∏ï‡πâ‡∏≠‡∏á Forward port ‡∏≠‡∏µ‡∏Å‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£ Forward port ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö Load balance

```bash
~ kubectl port-forward service/discovery-svc 9001:80&

Forwarding from 127.0.0.1:9001 -> 9001
Forwarding from [::1]:9001 -> 9001
```

‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ http://localhost:9001

![Service](/static/images/blog/jenkins-docker-kubernetes/service.png)

‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏ó‡∏î‡∏™‡∏≠‡∏ö Load balance ‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡∏¥‡∏î Tunnel

```bash

~ minikube tunnel

‚úÖ  Tunnel successfully started

üìå  NOTE: Please do not close this terminal as this process must stay alive for the tunnel to be accessible ...

‚ùó  The service/ingress discovery-svc requires privileged ports to be exposed: [80]
üîë  sudo permission will be asked for it.
üèÉ  Starting tunnel for service discovery-svc.
‚ùó  The service/ingress search-svc requires privileged ports to be exposed: [80]
üîë  sudo permission will be asked for it.
üèÉ  Starting tunnel for service search-svc.
‚ùó  The service/ingress example-ingress requires privileged ports to be exposed: [80 443]
üîë  sudo permission will be asked for it.
üèÉ  Starting tunnel for service example-ingress.
Password:
```

‡∏•‡∏≠‡∏á Get Service ‡∏≠‡∏µ‡∏Å‡∏£‡∏≠‡∏ö ‡∏à‡∏∞‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÑ‡∏î‡πâ 127.0.0.1 ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤‡πÉ‡∏ô EXTERNAL-IP

```bash

~ kubectl get service discovery-svc

NAME            TYPE           CLUSTER-IP      EXTERNAL-IP   PORT(S)        AGE
discovery-svc   LoadBalancer   10.111.56.231   127.0.0.1     80:31604/TCP   19h
```

‡∏•‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤ http://localhost

![Service](/static/images/blog/jenkins-docker-kubernetes/tunnel.png)

‡∏ñ‡πâ‡∏≤‡πÄ‡∏£‡∏≤‡∏ó‡∏î‡∏™‡∏≠‡∏ö Load Test ‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏¥‡∏î Tunnel ‡∏ñ‡∏∂‡∏á‡∏à‡∏∞‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥ Load Balance ‡πÉ‡∏´‡πâ




